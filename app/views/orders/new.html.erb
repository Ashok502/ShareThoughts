<%= form_for @order do |f| %>
  <%= f.hidden_field :payment_type, :value => @type %>
  <%= render :partial => '/layouts/error_messages', :locals => {:resource => @order} %>
  <% if params[:token] %>
    <%= f.hidden_field :express_token %>
    <%= f.hidden_field :payment_type, :value => 'paypal_express' %>
    <p>Name: <%=h @order.first_name %> <%=h @order.last_name %></p>
    <p>TODO Display order confirmation details</p>
  <% else %>
    <div class="control-group">
        <%= f.label :first_name, :class => 'control-label' %>
        <div class="controls">
            <%= f.text_field :first_name, :class => 'form-control' %>
        </div>
    </div>
    <div class="control-group">
        <%= f.label :last_name, :class => 'control-label' %>
        <div class="controls">
            <%= f.text_field :last_name, :class => 'form-control' %>
        </div>
    </div>
    <div class="control-group">
        <%= f.label :card_type, :class => 'control-label' %>
        <div class="controls">
            <%= f.select :card_type, options_for_select([["Visa", "visa"], ["MasterCard", "master"], ["Discover", "discover"], ["American Express", "american_express"]], :selected => f.object.card_type),{}, :class => 'form-control' %>
        </div>
    </div>
    <div class="control-group">
        <%= f.label :card_number, :class => 'control-label' %>
        <div class="controls">
            <%= f.text_field :card_number, :class => 'form-control' %>
        </div>
    </div>
    <div class="control-group">
        <%= f.label :card_expires_on, :class => 'control-label' %>
        <div class="controls">
            <%= f.date_select :card_expires_on, {:discard_day => true, :start_year => Date.today.year, :end_year => (Date.today.year+10), :add_month_numbers => true, :order => [:month, :year]}, :style => 'width: 120px;', :class => 'form-control' %>
        </div>
    </div>
    <div class="control-group">
        <%= f.label :card_verification, :class => 'control-label' %>
        <div class="controls">
            <%= f.text_field :card_verification, :style => 'width: 120px;', :class => 'form-control' %>
        </div>
    </div>
  <% end %>
  <%= f.submit "Continue", :class => 'btn btn-primary' %>
<% end %>